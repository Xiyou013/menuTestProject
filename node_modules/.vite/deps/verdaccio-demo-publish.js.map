{
  "version": 3,
  "sources": ["../../verdaccio-demo-publish/src/test.js", "../../verdaccio-demo-publish/src/menu.js", "../../verdaccio-demo-publish/main.js"],
  "sourcesContent": ["const addFn = (a, b) => {\r\n  console.log('测试npm包中addFn方法');\r\n  return a + b\r\n}\r\n\r\nconst logFn = (data) => {\r\n  console.log('单纯打印由引用方传过来的数据：', data);\r\n}\r\n\r\nmodule.exports.addFn = addFn\r\nmodule.exports.logFn = logFn", "const states = {\r\n  name: '', // 用户名称\r\n  // 菜单路由\r\n  dirs: [], // 目录级别数组，包含菜单级别数组\r\n  permissions: [], // 按钮级别数组\r\n  addRoutes: [], // 所拥有权限的异步路由+所有同步路由\r\n  permissionRoutes: [] // 所拥有权限的异步路由+有权限的同步路由；也就是所拥有有权限的路由\r\n}\r\n\r\n/**\r\n * router路由格式\r\n * 不是菜单列表里的路由\r\n * {\r\n *    path: '/login',\r\n *    component: () => import('@/views/Login/index.vue'),\r\n *    hidden: true,\r\n *    name: 'login'\r\n * }\r\n * \r\n * 一级菜单路由\r\n * {\r\n *    path: '/',\r\n *    component: Layout,\r\n *    children: [\r\n *      {\r\n *        path: 'home',\r\n *        component: () => import('@/views/home/index.vue'),\r\n *        name: 'home',\r\n *        meta: {\r\n *          title: '首页',\r\n *          icon: 'home',\r\n *          sid: 'home'\r\n *        }\r\n *       }\r\n *    ]\r\n * }\r\n * \r\n * 二级菜单路由\r\n * {\r\n *    path: '/',\r\n *    redirect: '/third/menuOne',\r\n *    component: Layout,\r\n *    name: 'third',\r\n *    meta: {\r\n *      title: '功能菜单三',\r\n *      icon: 'third',\r\n *      sid: 'third'\r\n *    },\r\n *    children: [\r\n *      {\r\n *        path: 'menuOne',\r\n *        component: () => import('@/views/ThirdMenu/menuOne.vue'),\r\n *        name: 'menuOne',\r\n *        meta: {\r\n *          title: '功能菜单三-一',\r\n *          icon: 'menuOne',\r\n *          sid: 't-menuOne'\r\n *        }\r\n *      }\r\n *    ]\r\n * }\r\n * \r\n */\r\n\r\n/**\r\n * 用户权限roles结构\r\n * roles：[\r\n *    {}, // 用户角色一\r\n *    {\r\n *      id // 角色id\r\n *      type // 角色对象：admin 管理员 ordinary 普通\r\n *      permission: [ // 角色前端权限\r\n *        {}, // 权限一\r\n *        {\r\n *          type // 权限类别：1 菜单 2 按钮\r\n *          name // 权限名称\r\n *          sid  // 权限唯一标识，与router路由里的sid一致\r\n *          children: [ // 该权限下的子权限，一般按钮没有子权限，只有二级菜单会有子权限存在\r\n *            {}, // 子权限一\r\n *            {\r\n *              type // 权限类别：1 菜单 2 按钮\r\n *              name // 权限名称\r\n *              sid  // 权限唯一标识，与router路由里的sid一致\r\n *            }\r\n *          ]\r\n *        }\r\n *      ]\r\n *    }\r\n * ]\r\n * \r\n */\r\n\r\n/**\r\n * \r\n * @param {*} dirs  // 菜单权限\r\n * @param {*} route // 路由信息\r\n * @returns Array\r\n */\r\n\r\nconst hasPermission = (dirs, route) => {\r\n  let tmp = []\r\n  route.children.forEach((child) => {\r\n    if (child.meta && child.meta.title) {\r\n      const idx = dirs.indexOf(child.meta.sid)\r\n      // 如果子路由不包含在用户权限内则隐藏\r\n      if (idx === -1) {\r\n        child.hidden = true\r\n      }\r\n    } else {\r\n      child.hidden = true\r\n    }\r\n  })\r\n  tmp.push(route)\r\n  return tmp\r\n}\r\n\r\n// routes:所有异步路由 menuList:登录用户拥有的菜单名称数组\r\n/**\r\n * \r\n * @param {*} routes    // asyncRoutes 所有异步路由\r\n * @param {*} menuList  // 用户所拥有的菜单权限\r\n * @returns Array\r\n */\r\nconst filterAsyncRoutes = (routes, menuList) => {\r\n  let res = []\r\n  routes.forEach((route) => {\r\n    if (route.meta && route.meta.title && menuList.indexOf(route.meta.sid) > -1) {\r\n      // 处理二级目录路由信息\r\n      let tmp = hasPermission(menuList, route)\r\n      // 将过滤后的路由信息添加到总的路由数组中\r\n      res = res.concat(tmp)\r\n    } else {\r\n      // 无下拉菜单目录(子菜单)\r\n      if (Array.isArray(route.children)) {\r\n        let single = route.children[0]\r\n        if (single.meta && single.meta.title && menuList.indexOf(single.meta.sid) > -1) {\r\n          // single表示单独显示，而不是嵌套在下拉菜单中\r\n          route.single = true\r\n          res.push(route)\r\n        }\r\n      }\r\n    }\r\n  })\r\n  return res\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} routes          // 所拥有权限的异步路由\r\n * @param {*} constantRoutes  // 所有同步路由\r\n * @param {*} menuList        // 菜单权限\r\n * @returns Array\r\n */\r\nconst getSetPermissionRoutes = (routes, constantRoutes, menuList) => {\r\n  console.log('44444444444');\r\n  let constantList = []\r\n  // let permissionRoutes = []\r\n  constantRoutes.forEach((item) => {\r\n    if (item.children && item.children.length > 0) {\r\n      let tmp = menuList.filter((val) => val === item.children[0].meta.sid)\r\n      if (tmp.length > 0) {\r\n        constantList.push(item)\r\n      }\r\n    }\r\n    if (item.hidden) {\r\n      constantList.unshift(item)\r\n    }\r\n  })\r\n  states.permissionRoutes = constantList.concat(routes)\r\n  return states.permissionRoutes\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} roles // 用户信息里的权限对象\r\n * @returns Object\r\n */\r\nconst formatMenuAndBtn = (roles) => {\r\n  let MenuAndBtn = {\r\n    menuArr: [],\r\n    btnArr: []\r\n  }\r\n  roles.forEach((item) => {\r\n    function transTree(val) {\r\n      val.forEach((it) => {\r\n        if (it.type === 1) {\r\n          MenuAndBtn.menuArr.push(it.sid)\r\n        }\r\n        if (it.type === 2) {\r\n          MenuAndBtn.btnArr.push(it.sid)\r\n        }\r\n        if (it.children) {\r\n          transTree(it.children)\r\n        }\r\n        if (it.buttons) {\r\n          transTree(it.buttons)\r\n        }\r\n      })\r\n    }\r\n    transTree(item.permission)\r\n  })\r\n  return MenuAndBtn\r\n}\r\n\r\nmodule.exports.hasPermission = hasPermission\r\nmodule.exports.filterAsyncRoutes = filterAsyncRoutes\r\nmodule.exports.getSetPermissionRoutes = getSetPermissionRoutes\r\nmodule.exports.formatMenuAndBtn = formatMenuAndBtn", "// import './src/test'\r\n// require('./src/test.js');\r\nconst { addFn, logFn } = require('./src/test.js')\r\nconst { hasPermission, filterAsyncRoutes, getSetPermissionRoutes, formatMenuAndBtn } = require('./src/menu.js')\r\nmodule.exports = {\r\n addFn, logFn, hasPermission, filterAsyncRoutes, getSetPermissionRoutes, formatMenuAndBtn\r\n}\r\nconsole.log('77777888888');\r\n"],
  "mappings": "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",
  "names": []
}
