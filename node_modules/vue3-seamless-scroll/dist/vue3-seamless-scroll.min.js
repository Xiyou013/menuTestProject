!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?l(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],l):l((e="undefined"!=typeof globalThis?globalThis:e||self).Vue3SeamlessScroll={},e.Vue)}(this,(function(e,l){"use strict";var a={modelValue:{type:Boolean,default:!0},list:{type:Array,required:!0,default:[]},step:{type:Number,default:1},limitScrollNum:{type:Number,default:3},hover:{type:Boolean,default:!1},direction:{type:String,default:"up"},singleHeight:{type:Number,default:0},singleWidth:{type:Number,default:0},singleWaitTime:{type:Number,default:1e3},isRemUnit:{type:Boolean,default:!1},isWatch:{type:Boolean,default:!0},delay:{type:Number,default:0},ease:{type:[String,Object],default:"ease-in"},count:{type:Number,default:-1},copyNum:{type:Number,default:1},wheel:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!1}};function t(e,l={}){e.component(l.name||o.name,o)}globalThis.window.cancelAnimationFrame=globalThis.window.cancelAnimationFrame||globalThis.window.webkitCancelAnimationFrame||globalThis.window.mozCancelAnimationFrame||globalThis.window.oCancelAnimationFrame||globalThis.window.msCancelAnimationFrame||function(e){return globalThis.window.clearTimeout(e)},globalThis.window.requestAnimationFrame=globalThis.window.requestAnimationFrame||globalThis.window.webkitRequestAnimationFrame||globalThis.window.mozRequestAnimationFrame||globalThis.window.oRequestAnimationFrame||globalThis.window.msRequestAnimationFrame||function(e){return globalThis.window.setTimeout(e,1e3/60)};const o=l.defineComponent({name:"vue3-seamless-scroll",inheritAttrs:!1,props:a,emits:["stop","count","move"],setup(e,{slots:a,emit:t,attrs:o}){const u=e,n=l.ref(null),i=l.ref(null),r=l.ref(null),s=l.ref(null),v=l.ref(null),d=l.ref(0),m=l.ref(0),c=l.ref(0),f=l.ref(0),p=l.ref(!1),h=l.ref(0),w=l.computed((()=>!!u.list&&u.list.length>=u.limitScrollNum)),y=l.computed((()=>({width:d.value?d.value+"px":"auto",transform:`translate(${c.value}px,${f.value}px)`,transition:`all ${"string"==typeof u.ease?u.ease:"cubic-bezier("+u.ease.x1+","+u.ease.y1+","+u.ease.x2+","+u.ease.y2+")"} ${u.delay}ms`,overflow:"hidden",display:u.singleLine?"flex":"block"}))),g=l.computed((()=>"left"==u.direction||"right"==u.direction)),b=l.computed((()=>g.value?{float:"left",overflow:"hidden",display:u.singleLine?"flex":"block",flexShrink:u.singleLine?0:1}:{overflow:"hidden"})),T=l.computed((()=>u.isRemUnit?parseInt(globalThis.window.getComputedStyle(globalThis.document.documentElement,null).fontSize):1)),N=l.computed((()=>u.singleWidth*T.value)),A=l.computed((()=>u.singleHeight*T.value)),F=l.computed((()=>{let e;var l=u.step;return e=(g.value?N:A).value,0<e&&0<e%l&&console.error("如果设置了单步滚动，step 需是单步大小的约数，否则无法保证单步滚动结束的位置是否准确。~~~~~"),l})),V=()=>{cancelAnimationFrame(s.value),s.value=null},x=(e,l,a)=>{s.value=requestAnimationFrame((function(){var o=m.value/2,n=d.value/2;"up"===e?(Math.abs(f.value)>=o&&(f.value=0,h.value+=1,t("count",h.value)),f.value-=l):"down"===e?(0<=f.value&&(f.value=-1*o,h.value+=1,t("count",h.value)),f.value+=l):"left"===e?(Math.abs(c.value)>=n&&(c.value=0,h.value+=1,t("count",h.value)),c.value-=l):"right"===e&&(0<=c.value&&(c.value=-1*n,h.value+=1,t("count",h.value)),c.value+=l),a||(n=u.singleWaitTime,v.value&&clearTimeout(v.value),A.value?Math.abs(f.value)%A.value<l?v.value=setTimeout((()=>{M()}),n):M():N.value&&Math.abs(c.value)%N.value<l?v.value=setTimeout((()=>{M()}),n):M())}))},M=()=>{if(V(),p.value||!w.value||h.value===u.count)return t("stop",h.value),void(h.value=0);x(u.direction,F.value,!1)},S=()=>{var e;(e=u.list)&&"boolean"!=typeof e&&100<e.length&&console.warn(`数据达到了${e.length}条有点多哦~,可能会造成部分老旧浏览器卡顿。`),g.value&&(e=2*(e=i.value.offsetWidth)+1,d.value=e),w.value?(m.value=r.value.offsetHeight,u.modelValue&&M()):(V(),f.value=c.value=0)},q=()=>{p.value=!1,M()},W=()=>{p.value=!0,v.value&&clearTimeout(v.value),V()},B=l.computed((()=>u.hover&&u.modelValue&&w.value)),C=function(e,l,a,t){var o,u=!1,n=0;function i(){o&&clearTimeout(o)}function r(){for(var r=arguments.length,s=new Array(r),v=0;v<r;v++)s[v]=arguments[v];var d=this,m=Date.now()-n;function c(){n=Date.now(),a.apply(d,s)}u||(t&&!o&&c(),i(),void 0===t&&e<m?c():!0!==l&&(o=setTimeout(t?function(){o=void 0}:c,void 0===t?e-m:e)))}return"boolean"!=typeof l&&(t=a,a=l,l=void 0),r.cancel=function(){i(),u=!0},r}(30,(e=>{V();var l=A.value||15;e.deltaY<0&&x("down",l,!0),0<e.deltaY&&x("up",l,!0)})),R=()=>{V(),p.value=!1,S()};var k;k={Reset:()=>{R()}},(e=l.getCurrentInstance())&&Object.assign(e.proxy,k),l.watch((()=>u.list),(()=>{u.isWatch&&l.nextTick((()=>{R()}))}),{deep:!0}),l.watch((()=>u.modelValue),(e=>{(e?q:W)()})),l.watch((()=>u.count),(e=>{0!==e&&q()})),l.onBeforeMount((()=>{V(),clearTimeout(v.value)})),l.onMounted((()=>{w.value&&S()}));const{default:$,html:j}=a,z=new Array(u.copyNum).fill(null),L=()=>l.createVNode(l.Fragment,null,[l.createVNode("div",{ref:i,style:b.value},[$&&$()]),w.value?z.map((()=>j&&"function"==typeof j?l.createVNode("div",{style:b.value},[j()]):l.createVNode("div",{style:b.value},[$&&$()]))):null]);return()=>l.createVNode("div",{ref:n,class:o.class},[u.wheel&&u.hover?l.createVNode("div",{ref:r,style:y.value,onMouseenter:()=>{B.value&&W()},onMouseleave:()=>{B.value&&q()},onWheel:e=>{B.value&&C(e=e)}},[L()]):l.createVNode("div",{ref:r,style:y.value,onMouseenter:()=>{B.value&&W()},onMouseleave:()=>{B.value&&q()}},[L()])])}});e.Vue3SeamlessScroll=o,e.default=function(e){e.use(t)},Object.defineProperty(e,"__esModule",{value:!0})}));
